{"version":3,"file":"static/webpack/static/development/pages/index.js.0ff76db2df6ee0fe5ed0.hot-update.js","sources":["webpack:///./pages/index.js"],"sourcesContent":["import moment from \"moment\"\nimport { Component } from \"preact\"\nimport Layout from \"../components/Layout\"\nimport { Matches } from \"../components/Match\"\nimport NewMatchForm from \"../components/Form/NewMatchForm\"\n\nimport { getMatches, createMatch } from \"../lib/cloudant\"\n\nclass Home extends Component {\n  state = {\n    matches: [],\n    currentTime: moment(),\n    formVisible: false,\n    isLoading: true\n  }\n\n  async componentDidMount() {\n    try {\n      const { data } = await getMatches()\n      this.setState({ matches: data.docs, isLoading: false })\n    } catch (error) {\n      console.error(\"error componentDidMount()\", error.response)\n      this.setState({ isLoading: false })\n    }\n  }\n\n  toggleModal = () => {\n    this.setState(({ formVisible }) => ({ formVisible: !formVisible }))\n  }\n\n  // TODO: Handle submit!\n  handleSubmit = async raw_data => {\n    try {\n      const reservation_date = moment(raw_data.date + \" \" + raw_data.time)\n      const data = {\n        title: raw_data.title,\n        owner: raw_data.owner,\n        reservation_date\n      }\n      const matchCreated = await createMatch(data)\n      console.log(\"result from created match\", matchCreated)\n      this.toggleModal()\n    } catch (error) {\n      console.log(\"error\", error)\n    }\n  }\n\n  render() {\n    const { matches, formVisible, currentTime, isLoading } = this.state\n    return (\n      <Layout>\n        <h1 className=\"title\">Cancha Martinez</h1>\n        <button className=\"button is-info\" onClick={this.toggleModal}>\n          Add new game\n        </button>\n\n\n        <Matches\n          matches={matches || this.state.matches}\n          // currentTime={currentTime}\n          isLoading={isLoading}\n        />\n\n        <NewMatchForm\n          isVisible={formVisible}\n          toggleModal={this.toggleModal}\n          sendData={this.handleSubmit}\n        />\n      </Layout>\n    )\n  }\n}\n\nexport default Home\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;;;;;;;;;;;;;;;;;;AACA;AACA;AACA;AACA;AACA;AAJA;AACA;AAgBA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;;;;;;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AAHA;AAHA;AAAA;AACA;AADA;AAQA;AACA;AACA;AAAA;AACA;AAXA;AAAA;AACA;AADA;AAAA;AAAA;AAYA;AACA;AAbA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;;;;;;;;;;;;;;;;;;AAdA;AACA;;;AADA;AACA;AAAA;AAAA;AAAA;;;;;;;AAEA;AACA;AAAA;AAAA;AACA;;;;;;;;;;;;;;;;;AAwBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAEA;AAAA;AACA;AAAA;AAAA;AAMA;AADA;AAGA;AAHA;AAOA;AACA;AACA;AAHA;AAOA;;;;AA9DA;AACA;AAgEA;;;;;;;;;;;;;;;;;;;;;;;A","sourceRoot":""}